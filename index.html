<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>3D Viewer</title>
  <style>
    html, body { margin:0; height:100%; background: transparent; }
    .wrap{
      width:100%;
      height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background: transparent;
      overflow:hidden;
    }
    model-viewer{
      width:min(520px, 92vw);
      height:min(520px, 70vh);
      background: transparent;
      animation: floaty 3.2s ease-in-out infinite;
      will-change: transform;
    }
    @keyframes floaty{
      0%{ transform: translateY(0); }
      50%{ transform: translateY(-12px); }
      100%{ transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <model-viewer
      id="mv"
      src="./models/rotating_star.glb"
      alt="3D Model"
      auto-rotate
      rotation-per-second="10deg"
      camera-controls
      disable-zoom
      interaction-prompt="none"
      environment-image="neutral"
      exposure="1.05"
      shadow-intensity="0.4"
    ></model-viewer>
  </div>

  <!-- Use BOTH. If module is blocked somewhere, legacy is a fallback -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>

  <script>
    // Gentle mouse tilt (desktop only)
    (function(){
      const mv = document.getElementById("mv");
      if (!mv) return;

      const isTouch = matchMedia("(pointer: coarse)").matches;
      if (isTouch) return;

      const strength = 6;
      let raf = null;

      window.addEventListener("mousemove", (e) => {
        if (raf) cancelAnimationFrame(raf);
        raf = requestAnimationFrame(() => {
          const x = (e.clientX / window.innerWidth - 0.5) * 2;
          const y = (e.clientY / window.innerHeight - 0.5) * 2;
          mv.style.animationPlayState = "paused";
          mv.style.transform = `translateY(-8px) rotateX(${(-y*strength)}deg) rotateY(${(x*strength)}deg)`;
        });
      });

      window.addEventListener("mouseleave", () => {
        mv.style.transform = "";
        mv.style.animationPlayState = "running";
      });
    })();
  </script>
</body>
</html>
